<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AirDesk - Find Your Workspace</title>
    <link rel="stylesheet" href="index.css" />
</head>
<body>
    <!-- Navbar Section -->
    <nav>
        <div>
            <img src="logo.svg" alt="AirDesk Logo">
        </div>
        <div>
            <div th:text="${credentials != null ? 'Credentials are present' : 'Credentials are null'}"></div>
            <!-- Show My Profile and Logout when user is logged in -->
            <div th:if="${credentials == null}">
                <a href="/login">Login</a>
                <a href="/register">Register</a>
                <a href="/hostRegister">HostRegister</a>             

                <!-- OR section for OAuth2 login -->
                <a th:href="@{/oauth2/authorization/google}" class="g-signin2">
                   <!--  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" width="18px" height="18px">
                        <path fill="#4285F4" d="M45.12 24.14c0-1.6-.14-3.15-.41-4.64H24v9.18h11.88c-.52 2.66-2.01 4.91-4.17 6.42l6.75 5.23c3.93-3.63 6.19-8.99 6.19-16.19z"/>
                        <path fill="#34A853" d="M24 48c5.63 0 10.35-1.87 13.8-5.07l-6.55-5.08c-1.83 1.23-4.15 1.98-7.25 1.98-5.56 0-10.26-3.75-11.94-8.78l-6.83 5.32C10.39 44.27 16.8 48 24 48z"/>
                        <path fill="#FBBC05" d="M12.06 28.14c-.43-1.25-.67-2.59-.67-3.96 0-1.37.24-2.71.67-3.96l-6.83-5.32c-1.54 2.85-2.43 6.1-2.43 9.28s.89 6.43 2.43 9.28l6.83-5.32z"/>
                        <path fill="#EA4335" d="M24 9.54c3.16 0 6.01 1.09 8.25 2.92l6.16-6.16C34.33 2.61 29.68 0 24 0 16.8 0 10.39 3.73 6.45 9.72l6.83 5.32C13.74 13.29 18.44 9.54 24 9.54z"/>
                    </svg>  -->
                 <img src="google-login.png" alt="Google logo">
                 Otherwise, continue with Google
                </a>
            </div>

            <!-- ALTERNATIVE WAY TO CHECK FOR AUTHENTICATED USER, boolean expression to ensure correct behavior -->
            <div th:if="${credentials != null}">
                <a href="/userPage">My Profile</a>
                <a href="/logout">Logout</a>

            </div>
            
        </div>
    </nav>

    <!-- Main Content Section -->
    <main>
        <h2>Welcome to</h2>
        <h1>AirDesk</h1>

        <!-- Alert if the user hasn't filled in the company field -->
        <div th:if="${credentials != null} and ${credentials.user.company == null}" class="alert">
            <p>You haven't added your company name yet! (or mark yourself as a freelance worker).</p>
        </div>
        
        <!-- Search Form -->
        <form action="/searchFacilities" method="get">
            <input type="text" name="city" placeholder="Where do you live? Look for a workstation near you!">
            <button type="submit">Search</button>
        </form>

        <!-- Contact Paragraph -->
        <p>
            Wanna digitalize your working spaces? <a href="/contact">Contact us here</a>
        </p>
    </main>
    <script>
        // Simple JS to reload the page after login
        if (window.location.pathname === '/login' && window.location.search.includes('success')) {
            window.location.href = '/';  // Redirect to home page
        }
    </script>
</body>
</html>
